---
# applications to install on a desktop machine
profile::apps::to_install:
  'libreoffice':
    ensure: present
  'bundler':
    ensure: present
  'git-flow':
    ensure: present
  'git-flow':
    ensure: latest
  'linux-headers-generic':
    ensure: latest
  'puppet-lint':
    ensure: latest
  'ruby-dev':
    ensure: latest
  'vagrant':
    ensure: latest
  'virtualbox':
    ensure: latest
  'virtualbox-dkms':
    ensure: latest
  'virtualbox-guest-additions-iso':
    ensure: latest

pdnsd::preferred_servers:
  'williamhill':
    ip: 10.180.18.24, 10.180.24.138, 10.180.24.139
    proxy_only: off
    timeout: 4
    interface: eth0
    interval: 10m
    purge_cache: off
    edns_query: yes
    exclude:
      - .thepiratebay.se
      - .piratebay.org
      - .piratebay.se

# we need the search domain
dns_search: 'local mgmt.pp1.williamhill.plc mgmt.pp2.williamhill.plc mgmt.pp3.williamhill.plc mgmt.williamhill.plc mgmt.pte.williamhill.plc adgency-domain.ad-gency.com Group.WilliamHill.PLC mgmt.prod.williamhill.plc prod.williamhill.plc williamhill.local williamHill.PLC williamhill.co.uk williamhill.remote'

#Mount points need on work desktop
profile::etc::mnt_config:
  '/mnt/willhill/marcusc':
    device: '//gib-fs1.adgency-domain.ad-gency.com/marcusc$'
    options: 'creds=/home/mcampbell/.config/online-cifs.pw,users,uid=1000,gid=1000,exec'
  '/mnt/willhill/systemengineers':
    device: '//gib-fs1.adgency-domain.ad-gency.com/systemengineers$'
  '/mnt/willhill/online-architecture':
    device: '//gib-fs1.adgency-domain.ad-gency.com/Architecture$'
  '/mnt/willhill/group-shared':
    device: '//group.williamhill.plc/shared'
    options: 'creds=/home/mcampbell/.config/group-cifs.pw,users,uid=1000'

profile::etc::mnt_config_defaults:
    ensure: mounted
    fstype: 'cifs'
    options: 'creds=/home/mcampbell/.config/online-cifs.pw,users,uid=1000,gid=1000'

profile::etc::config:
      '/mnt':
        ensure: directory
      '/mnt/willhill':
        ensure: directory
      '/mnt/willhill/marcusc':
        ensure: directory
        owner: mcampbell
      '/mnt/willhill/systemengineers':
        ensure: directory
        owner: mcampbell
      '/mnt/willhill/online-architecture':
        ensure: directory
        owner: mcampbell
      '/mnt/willhill/group-shared':
        ensure: directory
        owner: mcampbell

users:
  'mcampbell':
    config:
      '/home/mcampbell/.config/group-cifs.pw':
        ensure: file
        source: 'puppet:///modules/profile/mcampbell/group-cifs-WHOD5000370'
      '/home/mcampbell/.config/online-cifs.pw':
        ensure: file
        source: 'puppet:///modules/profile/mcampbell/online-cifs-WHOD5000370'
      '/home/mcampbell/.cx_config':
        ensure: file
        source: 'puppet:///modules/profile/mcampbell/cx_config'
      '/home/mcampbell/.synergy.conf':
        ensure: file
        source: 'puppet:///modules/profile/mcampbell/synergy_willhill.conf'
      '/var/spool/cron/crontabs/mcampbell':
        ensure: file
        mode: '0600'
        source: 'puppet:///modules/profile/mcampbell/cron-WHOD5000370'
      '/home/mcampbell/1-data/WillHill':
        ensure: link
        target: '/mnt/willhill/marcusc/willhill'
      '/home/mcampbell/.dialrc':
        ensure: file
        source: 'puppet:///modules/profile/mcampbell/dialrc'
